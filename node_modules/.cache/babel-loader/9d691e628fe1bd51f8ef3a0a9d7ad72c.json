{"ast":null,"code":"var _jsxFileName = \"/Users/neo/seir222/unit3/pweek3/Foodle-Front/client/src/pages/PostDetail.js\",\n    _s = $RefreshSig$();\n\nimport { connect } from 'react-redux';\nimport { LoadOnePostDetail, LoadPostDetail, UploadComment, UpdateComment, ToggleMoreComment } from '../store/actions/PostDetailActions';\nimport { LoadPosts } from '../store/actions/PostActions';\nimport { useEffect } from 'react';\nimport Comment from '../components/Comment';\nimport { useParams } from 'react-router-dom';\nimport ReactStars from 'react-stars';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst mapStateToProps = _ref => {\n  let {\n    postState,\n    postDetailState\n  } = _ref;\n  return {\n    postState,\n    postDetailState\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchPostDetail: id => dispatch(LoadPostDetail(id)),\n    fetchOnePostDetail: id => dispatch(LoadOnePostDetail(id)),\n    updatePostState: id => dispatch(LoadPosts(id)),\n    uploadComment: (user_id, post_id, newComment) => dispatch(UploadComment(user_id, post_id, newComment)),\n    updateComment: comment => dispatch(UpdateComment(comment)),\n    toggleMoreComment: value => dispatch(ToggleMoreComment(value))\n  };\n};\n\nconst PostDetail = props => {\n  _s();\n\n  const {\n    post_id\n  } = useParams(); //for postState\n\n  useEffect(() => {\n    const GetPost = async () => {\n      await props.fetchOnePostDetail(post_id);\n      props.updatePostState(post_id);\n    };\n\n    GetPost();\n  }, [post_id]); //for postDetailState\n  // useEffect(() => {\n  //     const GetPostDetail = async () => {\n  //         await props.fetchPostDetail(post_id)\n  //     }\n  //     GetPostDetail()\n  // }, [post_id])\n\n  const handleSubmit = e => {\n    const user_id = props.user.id; //console.log(user_id)\n\n    e.preventDefault();\n\n    if (props.postDetailState.moreComment) {\n      props.uploadComment(user_id, post_id, props.postDetailState.newComment);\n    }\n\n    props.toggleMoreComment(!props.postDetailState.moreComment);\n  };\n\n  const handleChange = async e => {\n    const newComment = props.postDetailState.newComment;\n    await props.updateComment({ ...newComment,\n      [e.target.name]: e.target.value\n    }); //console.log(newComment)\n  }; //console.log(props.user, \"user\")\n\n\n  const post = props.postDetailState.postDetail;\n  console.log(props.postDetailState.postDetail.Comments, \"POST DETAIL STATE\");\n\n  if (post.id) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-detail\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: post.image,\n        style: {\n          width: '300px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Title: \", post.title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Url: \", post.recipeUrl]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Rating: \", post.rating]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Description: \", post.description]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: [\"Posted by User: \", post.userId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: props.postDetailState.postDetail.Comments.map(comm => /*#__PURE__*/_jsxDEV(Comment, {\n          commentor: comm.User.username,\n          rating: comm.rating,\n          comment: comm.comment\n        }, comm.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this), props.postDetailState.moreComment && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(ReactStars, {\n          onChange: handleChange,\n          size: 24,\n          count: 5,\n          color2: '#ffd700',\n          className: 'stars',\n          half: false,\n          name: \"rating\",\n          value: props.postDetailState.newComment.rating\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          onChange: handleChange,\n          name: \"comment\",\n          value: props.postDetailState.newComment.comment,\n          placeholder: \"Add your thoughts...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => handleSubmit(e),\n        children: props.postDetailState.moreComment ? 'Send' : 'Add a Comment'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading......\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this);\n  }\n};\n\n_s(PostDetail, \"1NUDwE/ES92zu7epDkKueHohu08=\", false, function () {\n  return [useParams];\n});\n\n_c = PostDetail;\nexport default connect(mapStateToProps, mapDispatchToProps)(PostDetail);\n\nvar _c;\n\n$RefreshReg$(_c, \"PostDetail\");","map":{"version":3,"sources":["/Users/neo/seir222/unit3/pweek3/Foodle-Front/client/src/pages/PostDetail.js"],"names":["connect","LoadOnePostDetail","LoadPostDetail","UploadComment","UpdateComment","ToggleMoreComment","LoadPosts","useEffect","Comment","useParams","ReactStars","mapStateToProps","postState","postDetailState","mapDispatchToProps","dispatch","fetchPostDetail","id","fetchOnePostDetail","updatePostState","uploadComment","user_id","post_id","newComment","updateComment","comment","toggleMoreComment","value","PostDetail","props","GetPost","handleSubmit","e","user","preventDefault","moreComment","handleChange","target","name","post","postDetail","console","log","Comments","image","width","title","recipeUrl","rating","description","userId","map","comm","User","username"],"mappings":"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","sourcesContent":["import { connect } from 'react-redux'\nimport {\n    LoadOnePostDetail,\n    LoadPostDetail,\n    UploadComment,\n    UpdateComment,\n    ToggleMoreComment\n  } from '../store/actions/PostDetailActions'\nimport {LoadPosts} from '../store/actions/PostActions' \nimport { useEffect } from 'react'\nimport Comment from '../components/Comment'\nimport { useParams } from 'react-router-dom'\nimport ReactStars from 'react-stars'\n\n\nconst mapStateToProps = ({  postState, postDetailState }) => {\n    return {  postState, postDetailState }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        fetchPostDetail: (id) => dispatch(LoadPostDetail(id)),\n        fetchOnePostDetail: (id) => dispatch(LoadOnePostDetail(id)),\n        updatePostState: (id) => dispatch(LoadPosts(id)),\n        uploadComment: (user_id, post_id, newComment) => dispatch(UploadComment(user_id, post_id, newComment)),\n        updateComment: (comment) => dispatch(UpdateComment(comment)),\n        toggleMoreComment: (value) => dispatch(ToggleMoreComment(value))\n    }\n}\n\nconst PostDetail = (props) => {\n\n    const {post_id} = useParams()\n    //for postState\n    useEffect(() => {\n        const GetPost = async () => {\n            await props.fetchOnePostDetail(post_id)\n            props.updatePostState(post_id)\n        }\n        GetPost()\n    }, [post_id])\n\n    //for postDetailState\n    // useEffect(() => {\n    //     const GetPostDetail = async () => {\n    //         await props.fetchPostDetail(post_id)\n    //     }\n    //     GetPostDetail()\n    // }, [post_id])\n    \n    const handleSubmit = (e) => {\n        const user_id = props.user.id\n        //console.log(user_id)\n        e.preventDefault()\n        if (props.postDetailState.moreComment){\n            props.uploadComment(user_id, post_id, props.postDetailState.newComment)\n        }\n        props.toggleMoreComment(!props.postDetailState.moreComment)\n    }\n    \n    const handleChange = async (e) => {\n        const newComment = props.postDetailState.newComment\n        await props.updateComment({...newComment, [e.target.name]: e.target.value })\n        //console.log(newComment)\n    }\n    \n    //console.log(props.user, \"user\")\n    const post = props.postDetailState.postDetail\n    console.log(props.postDetailState.postDetail.Comments, \"POST DETAIL STATE\")\n    if (post.id){\n    return(\n        <div className='post-detail' >\n            \n            <img src={post.image} style={{width: '300px'}}/>\n            <h3>Title: {post.title}</h3>\n            <h3>Url: {post.recipeUrl}</h3>\n            <h3>Rating: {post.rating}</h3>\n            <p>Description: {post.description}</p>\n            <h5>Posted by User: {post.userId}</h5> \n            <div>\n                {props.postDetailState.postDetail.Comments.map((comm) => (\n                    <Comment commentor={comm.User.username}rating={comm.rating} comment={comm.comment} key={comm.id} /> \n                    \n                ))} \n            </div>\n            {props.postDetailState.moreComment && (\n                <div>\n                    <ReactStars\n                        onChange={handleChange}\n                        size={24}\n                        count={5}\n                        color2={'#ffd700'}\n                        className={'stars'}\n                        half={false}\n                        name='rating'\n                        value={props.postDetailState.newComment.rating}\n                    />\n                    <textarea \n                        onChange={handleChange}\n                        name='comment'\n                        value={props.postDetailState.newComment.comment}\n                        placeholder=\"Add your thoughts...\"\n                    />\n                </div>\n            )}\n            <button onClick={(e)=> handleSubmit(e)}>\n                {props.postDetailState.moreComment ? 'Send' : 'Add a Comment'}\n            </button>\n        </div>\n        )\n    }else {\n        return (\n            <div>Loading......</div>\n        )\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PostDetail)"]},"metadata":{},"sourceType":"module"}